<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="egov.board.dao.BoardMapper">

	<!-- 글 저장 -->
	<select id="saveBoard" statementType="CALLABLE" parameterType="java.util.HashMap">
	    { call SP_SAVEBOARD(
	        #{in_userid, mode=IN, jdbcType=VARCHAR},
	        #{in_content, mode=IN, jdbcType=VARCHAR},
	        #{in_title, mode=IN, jdbcType=VARCHAR},
	        #{out_state, mode=OUT, jdbcType=INTEGER}
	    )}
	</select>
	
	<!-- 글 조회 -->
	<select id="showBoard" statementType="CALLABLE" parameterType="java.util.HashMap">
	    { call SP_SHOWBOARD(
	        #{in_brdid, mode=IN, jdbcType=INTEGER},
	        #{out_state, mode=OUT, jdbcType=INTEGER},
	        #{REF_CURSOR, mode=OUT, jdbcType=CURSOR, resultMap=boardResultMap}
	    )}
	</select>
	
	<!-- 글 목록 조회 -->
	<select id="showBoardList" statementType="CALLABLE" parameterType="java.util.HashMap">
	    { call SP_SHOWBOARDLIST(
	        #{out_state, mode=OUT, jdbcType=INTEGER},
	        #{REF_CURSOR, mode=OUT, jdbcType=CURSOR, resultMap=boardResultMap}
	    )}
	</select>
	
	<resultMap id="boardResultMap" type="java.util.HashMap">
	    <result property="writerip" column="WRITERIP"/>
	    <result property="userid" column="USERID"/>
	    <result property="upduserid" column="UPDUSERID"/>
	    <result property="updip" column="UPDIP"/>
	    <result property="title" column="TITLE"/>
	    <result property="seecount" column="SEECOUNT"/>
	    <result property="replycount" column="REPLYCOUNT"/>
	    <result property="parentid" column="PARENTID"/>
	    <result property="nickname" column="NICKNAME"/>
	    <result property="grouptab" column="GROUP_TAB"/>
	    <result property="grouporder" column="GROUP_ORDER"/>
	    <result property="groupnum" column="GROUP_NUM"/>
	    <result property="fileurl" column="FILEURL"/>
	    <result property="filetype" column="FILETYPE"/>
	    <result property="filename" column="FILENAME"/>
	    <result property="boardtype" column="BOARDTYPE"/>
	    <result property="boardid" column="BOARDID"/>
	    <result property="boardcontents" column="BOARDCONTENTS" 
	            jdbcType="CLOB" javaType="string"/>
	    <result property="writetime" column="WRITETIME"/>
	</resultMap>
</mapper>
